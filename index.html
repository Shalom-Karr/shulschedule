<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Image Viewer for Older Browsers</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
        /* Basic styles for full page layout */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Hide scrollbars */
            background-color: #1a1a1a;
        }

        /* The main container */
        #imageContainer {
            position: relative; /* This is the anchor for the image */
            width: 100%;
            height: 100%;
        }

        /* The image itself. Its size and position will be controlled by JavaScript. */
        #zoomableImage {
            position: absolute;
            cursor: move; /* 'move' cursor is supported by all old browsers */
        }
        
        /* The control buttons */
        #controls {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
        }

        #controls button {
            width: 80px;
            padding: 5px;
            font-size: 14px;
            margin-left: 5px;
        }
    </style>
</head>

<body>

    <div id="imageContainer">
        <!-- The image from Google Drive -->
        <img id="zoomableImage" src="https://drive.google.com/file/d/1aIqWyq30MmpUsMr55JfMqfAIYkYWHPr0" alt="Loading image...">
    </div>
    
    <!-- Buttons for controls -->
    <div id="controls">
        <button onclick="zoom(1.25);">+</button>
        <button onclick="zoom(0.8);">-</button>
        <button onclick="resetImage();">Reset</button>
        <button onclick="alert('To enter or exit full screen, press the F11 key on your keyboard.');">Fullscreen</button>
    </div>

    <script type="text/javascript">
        // Get references to our elements
        var img = document.getElementById('zoomableImage');
        var container = document.getElementById('imageContainer');

        // Variables to store image state
        var imgWidth, imgHeight, imgTop, imgLeft;
        
        // Variables for dragging
        var isDragging = false;
        var startX, startY, startLeft, startTop;

        // This function runs once the image has finished loading
        img.onload = function() {
            // Store the image's natural dimensions
            imgWidth = img.width;
            imgHeight = img.height;
            
            // Center the image for the first time
            resetImage();
        };
        
        // Fallback for if the image is already cached and onload doesn't fire
        if (img.complete) {
            img.onload();
        }

        // --- ZOOM FUNCTIONALITY ---
        function zoom(factor) {
            // Calculate the new dimensions
            var newWidth = imgWidth * factor;
            var newHeight = imgHeight * factor;
            
            // Calculate how much the size changed
            var widthChange = newWidth - imgWidth;
            var heightChange = newHeight - imgHeight;

            // Adjust the top/left to keep the zoom centered
            imgTop = imgTop - (heightChange / 2);
            imgLeft = imgLeft - (widthChange / 2);

            // Update the stored dimensions
            imgWidth = newWidth;
            imgHeight = newHeight;
            
            // Apply all the new styles to the image
            updateImageStyle();
        }

        // --- RESET FUNCTIONALITY ---
        function resetImage() {
            // Get the browser window's dimensions
            var viewWidth = container.offsetWidth;
            var viewHeight = container.offsetHeight;

            // Calculate the best fit (contain) for the image
            var ratio = Math.min(viewWidth / img.naturalWidth, viewHeight / img.naturalHeight);
            
            imgWidth = img.naturalWidth * ratio;
            imgHeight = img.naturalHeight * ratio;

            // Center the image
            imgTop = (viewHeight - imgHeight) / 2;
            imgLeft = (viewWidth - imgWidth) / 2;

            updateImageStyle();
        }

        // --- DRAG/PAN FUNCTIONALITY ---
        img.onmousedown = function(e) {
            e = e || window.event; // Cross-browser way to get the event object
            e.preventDefault ? e.preventDefault() : e.returnValue = false; // Prevent default image drag

            isDragging = true;
            
            // Record starting positions
            startX = e.clientX;
            startY = e.clientY;
            startLeft = imgLeft;
            startTop = imgTop;

            // Attach listeners to the whole document
            document.onmousemove = onDrag;
            document.onmouseup = onStopDrag;
        };

        function onDrag(e) {
            if (!isDragging) return;
            e = e || window.event;

            // Calculate the distance the mouse has moved
            var deltaX = e.clientX - startX;
            var deltaY = e.clientY - startY;
            
            // Update the image position
            imgLeft = startLeft + deltaX;
            imgTop = startTop + deltaY;
            
            updateImageStyle();
        }

        function onStopDrag() {
            isDragging = false;
            // VERY IMPORTANT: Remove the listeners from the document
            document.onmousemove = null;
            document.onmouseup = null;
        }
        
        // --- HELPER FUNCTION ---
        // A single function to apply all style changes to the image
        function updateImageStyle() {
            img.style.width = imgWidth + 'px';
            img.style.height = imgHeight + 'px';
            img.style.top = imgTop + 'px';
            img.style.left = imgLeft + 'px';
        }

    </script>

</body>
</html>
